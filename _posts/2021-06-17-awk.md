---
layout: post
title:  "善用awk"
---

今天处理文本有这么需求：目前我有几个excel文件包含了数据，要导入数据库。
用python的方式我想构建一个dict如下：

```python
data_table = {
    "docs/基础数据/主机.xlsx": "t_data_主机",
    "docs/基础数据/单位.xlsx": "t_data_单位",
}
```

首先我用find命令产生了这种格式
```bash
docs/基础数据/主机.xlsx
docs/基础数据/单位.xlsx
```

因为文件比较多，我不想自己手动一个个改，所以用了awk。awk -F可以设置多
个分隔符。我给的分隔符是'/|.xlsx'，这样就可以把每一行拆分成多个变量。
而$0是它本身。接下来我只要把$3拿出来做拼接就好了。

平时我是不太乐意用awk的（尤其是着急着做一件事时），因为陌生所以害怕折
腾太久，但如果熟悉了更多的awk技巧，编辑代码就会轻松得多了。

